# 图像读取显示存储

imread 加载图像
1.加载彩色图像（默认加载形式）
imread(图像路径， IMREAD_COLOR)；
2.加载灰度模式图像
imread(path, IMREAD_GRAYSCALE)；
3.加载图像，包括alpha通道
imread(path, IMREAD_UNCHANGED)；

namedWindow() 的功能就是新建一个显示窗口，用来显示图像
namedWindow(name, WINDOW_AUTOSIZE) 不可变大小，默认
namedWindow(name, WINDOW_NORMAL) 可变大小

imshow函数
功能：imshow函数用于显示图像。
imshow() 函数包含两个参数：
imshow(窗口名称，图像名称)

imwrite函数用于存储图像。
imwrite() 函数包含两个参数：
imwrite(保存图像名称及格式，图像名称)
```c++
#include<opencv2/opencv.hpp>
#include<iostream>

int main()
{
	cv::Mat image;   //创建一个空图像image
	image = cv::imread("1.jpg");  //读取文件夹中的图像

	//检测图像是否加载成功
	if (image.empty())  //检测image有无数据，无数据 image.empty()返回 真
	{
		cout << "Could not open or find the image" << endl;
		return -1;
	}

	cv::namedWindow("IMAGE");  //创建显示窗口，不加这行代码，也能显示，默认窗口大小不能改变
	cv::imshow("IMAGE", image);  //在窗口显示图像

	cv::imwrite("1.png", image); //保存图像为png格式，文件名称为1

	waitKey(0);  //暂停，保持图像显示，等待按键结束

	return 0;
}
```

# Mat
Mat 存储多维数据（如图像、矩阵），支持单通道或多通道（如RGB图像的3通道）
主要成员变量
```c++
cv::Mat data;        // 指向实际数据的指针
int rows, cols;      // 矩阵的行数和列数
int channels;        // 通道数（如灰度图=1，RGB=3）
cv::MatType type;    // 数据类型（如CV_8U表示8位无符号整数, CV_8UC3三通道8位无符号型）
size_t step;         // 行步长（单位：字节，用于非连续存储）
void* refcount;      // 引用计数（实现自动内存管理）
```
CV_8UC3：三通道8位无符号型，这里三通道指B（蓝）G（绿）R（红），与matlab中的RGB正好相反。

```c++
Mat image1(100,100,CV_8U, Scalar(100)); //创建 100*100的灰度图，灰度为100
Mat image1(100,100,CV_8UC3, Scalar(100,100,100)); //创建 100*100的图像，RGB都为100
cv::Mat(rows, cols, type);             // 创建空矩阵
cv::Mat(nRows, nCols, type, data);     // 使用外部数据指针
cv::Mat(Size(rows, cols), type);       // 通过Size初始化
```

选取感兴趣区域
```c++
Mat image1 = imread("lena.png");  //读取图像；
Mat imageROI(image1, Rect(0,0,10,10));  //定义感兴趣区域
```
数据访问
```
//高效但需谨慎
uchar* ptr = img.ptr<uchar>(y);  // 获取第y行的指针
for (int x = 0; x < cols; x++) {
    ptr[x] = 255;  // 直接修改像素值
}
//（安全）
img.at<Vec3b>(y, x)[0] = 0; // 访问RGB图像的B通道
// []
cv::Mat row = img[y]; // 获取第y行（返回子矩阵）
```

# Scalar
Scalar 类是一个用于表示多通道数值（如颜色、像素值）的核心数据结构, 继承自 Vec<_Tp, 4> 的模板类，最多可存储4个通道的数值（默认未赋值的通道为0）
表示颜色时Scalar(255,0,0) 为蓝色 -> BGR
常用构造方法
```c++
cv::Scalar s1(255);          // 单通道值（其余通道为0）
cv::Scalar s2(0, 255, 0);    // 三通道值（BGR绿色）
cv::Scalar s3 = cv::Scalar::all(100); // 所有通道赋相同值
```