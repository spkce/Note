# opencv_createsamples
opencv_createsamples ：用来准备训练用的正样本数据和测试数据。opencv_createsamples 能够生成能被opencv_haartraining 和 opencv_traincascade 程序支持的正样本数据。它的输出为以 *.vec 为扩展名的文件，该文件以二进制方式存储图像
```shell
opencv_createsamples -info positives.txt -vec faces.vec -num 5000 -w 24 -h 24
```
-vec : 指定输出向量文件路径
-num : 生成样本数量（单图模式需≥1000）
-bgcolor : 背景填充灰度值（0-255）
-maxidev : 前景像素灰度随机扰动范围
-w/-h : 输出样本尺寸（需与后续训练参数一致）

positives.txt文件内容为 
```
img1.jpg 1 0 0 100 100
img2.jpg 2 10 20 80 80 50 60 70 70
每行表示：文件名 目标数量 [x y width height]...
```

# opencv_traincascade
opencv_traincascade ：支持 Haar和 LBP(Local Binary Patterns) 两种特征，并易于增加其他的特征。opencv_haartraining 是一个将被弃用的程序（Opencv3.0版本中没有）。opencv_traincascade 可以旧格式导出选练好的级联分类器。

```shell
opencv_traincascade -data xx.xml -vec positives.vec -bg negatives.txt \
  -numStages 20 -minHitRate 0.999 -maxFalseAlarmRate 0.5 \
  -numPos 1000 -numNeg 600 -w 24 -h 24
```
参数：
data :训练的分类器的存储目录
vec :正样本文件，由open_createsamples.exe生成，正样本文件后缀名为.vec

bg:负样本说明文件，主要包含负样本文件所在的目录及负样本文件名

numPos :每级分类器训练时所用到的正样本数目，应小于vec文件中正样本的数目，具体数目限制条件为：numPos+（numStages-1）numPos（1-minHitRate）<=vec文件中正样本的数目

numNeg:每级分类器训练时所用到的负样本数目，可以大于-bg指定的图片数目

numStages :训练分类器的级数，强分类器的个数

precalcValBufSize :缓存大小，用于存储预先计算的特征值，单位MB

precalcIdxBufSize : 缓存大小，用于存储预先计算的特征索引，单位MB

baseFormatSave :仅在使用Haar特征时有效，如果指定，级联分类器将以老格式存储